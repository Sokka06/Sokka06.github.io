---
title: "Boat Controller and AI Steering"
date: "2021-03"
tags: ["Unity", "C#", "Android"]
media: ["./00.mp4", "./01.mp4", "./02.jpg"]
---

**An arcadish Boat Controller and AI Steering for a mobile game.**

[Dynamic Water Physics 2](https://assetstore.unity.com/packages/tools/physics/dynamic-water-physics-2-147990) by NWH Coding was used for water buoyancy physics 
and water shader is [Stylized Water 2](https://assetstore.unity.com/packages/vfx/shaders/stylized-water-2-170386) by Staggart Creations.

The AI uses [Behavior Designer](https://assetstore.unity.com/packages/tools/visual-scripting/behavior-designer-behavior-trees-for-everyone-15277) by Opsive along with custom *actions* to steer the boat. 
The first *action* tries to drive the boat along a given racing line and the second *action* tries to steer away from dynamic objects to avoid collisions.

Race line *action* finds the closest point on the racing line and a future point based on current speed and look-ahead time. 
These two points are used to sample the line to get a world position and tangent direction. 
At the moment I calculate a middle point from current and future points as well as a direction between current and future points tangent direction and use them to calculate the direction AI should steer towards.

Avoidance *action* scans for dynamic objects in the direction the boat is currently traveling. 
All detected dynamic objects are iterated through to calculate a direction away from them. 
Before this direction is used to influence the current steer direction, it is scaled by a few different factors, e.g. how far away the object is from the boat, is the boat going towards it, and is it moving in the same direction and at the same speed.

Every *action* also has a Weight variable, which can be used to adjust how much that action will influence the AI's overall target direction and speed.

This boat controller uses a similar component-based approach to control its Rigidbody as two previous projects.